<!DOCTYPE html>
<!--
Copyright (C) 2015 Luis Cabrerizo Gómez

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<html>
    <head>
        <title>DWEC_Tarea_4</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript">

            /**
             * Método  para crear un objeto a medida edificio donde se 
             * almacenarán los datos correspondientes del mismo
             * @constructor
             * @param {type} calle Calle donde está situado el edificio
             * @param {type} numero Numero de la calle donde está situado el 
             * edificio.
             * @param {type} codPostal Código postal de la localidad donde 
             * está situado el edificio
             * @returns {edificio} Devuelvo un objeto edificio con los valores 
             * pasados en el constructor y con los métodos propios del objeto
             */
            function edificio(calle, numero, codPostal)
            {
                // Asignamos los valores del contructor a las variables 
                // locales del objeto
                this.calle = calle;
                this.numero = numero;
                this.codPostal = codPostal;

                // Creamos un array donde almacenaremos los datos de las 
                // puertas que contiene cada planta. Cada posición del array 
                // corresponde a una planta del edificio
                this.PlantasPuertas = new Array();

                // Escribimos un texto cuando creamos un nuevo objeto edificio, 
                // mostrando al usuario la información que ha introducido
                document.write("- Construido nuevo edificio en calle: " +
                        this.calle + ", nº: " + this.numero + ", CP: " +
                        this.codPostal);

                // Escribimos un salto de linea
                document.write("<br />");

                /***
                 * Método  que nos permite añadir plantas al edificio 
                 * con un número de puestas específicos
                 * @param {type} numplantas Número de plantas a agregar
                 * @param {type} puertas Número de puertas que contiene 
                 * cada planta
                 * @returns {undefined}
                 */
                this.agregarPlantasYPuertas = function (numplantas, puertas)
                {
                    // Iteramos tantas veces como número de plantas hayamos 
                    // especificado
                    for (var i = 0; i < numplantas; i++)
                    {
                        // Agregamos un nuevo array del tamaño especificado 
                        // por el número de puertas en cada iteración. Este 
                        // array contendrá los nombres de los propietarios de las 
                        // pisos de la planta, correspondiendo cada posición con 
                        // una puerta
                        this.PlantasPuertas.push(new Array(puertas));

                        // Mostramos un texto al usuario al crear cada nueva planta
                        document.write("- Agregada planta " + this.PlantasPuertas.length + " con " + puertas + " puertas");
                        document.write("<br />");
                    }
                };

                /***
                 * Método  que nos permite modificar el número del edificio
                 * @param {type} numero Nuevo número del edificio
                 * @returns {undefined}
                 */
                this.modificarNumero = function (numero)
                {
                    // Asignamos el nuevo número a la propiedad del objeto 
                    // edificio
                    this.numero = numero;
                };

                /***
                 * Método  que nos permite modificar el nombre de la calle del 
                 * edificio
                 * @param {type} calle Nueva calle del edificio
                 * @returns {undefined}
                 */
                this.modificarCalle = function (calle)
                {
                    // Asignamos la nueva calle a la propiedad del objeto 
                    // edificio                    
                    this.calle = calle;
                };

                /**
                 * Método que nos permite modificar el código postal del edificio
                 * @param {type} codigo Nuevo código postal del edificio
                 * @returns {undefined}
                 */
                this.modificarCodigoPostal = function (codigo)
                {
                    // Asignamos el nuevo código postal a la propiedad del 
                    // objeto edificio
                    this.codPostal = codigo;
                };

                /**
                 * Método  que nos devuelve el nombre de la calle del edificio.
                 * @returns {undefined}
                 */
                this.imprimeCalle = function ()
                {
                    // Devulvemos la propiedad calle del edificio
                    return this.calle;

                };

                /***
                 * Método que nos devuelve el número del edificio.
                 * @returns {undefined}
                 */
                this.imprimeNumero = function ()
                {
                    // Devulvemos la propiedad numero del edificio
                    return this.numero;
                };

                /**
                 * Método que nos devuelve el código postal del edificio.
                 * @returns {undefined}
                 */
                this.imprimeCodigoPostal = function ()
                {
                    // Devulvemos la propiedad codPostal del edificio
                    return this.codPostal;
                };

                /**
                 * Método que nos permite asignar un nombre a una puerta 
                 * específica de una planta concreta del edificio
                 * @param {type} nombre Nombre del propietario
                 * @param {type} planta Planta del edificio
                 * @param {type} puerta Puerta de la planta
                 * @returns {undefined}
                 */
                this.agregarPropietario = function (nombre, planta, puerta)
                {
                    // Asignamos el valor del nombre al array de plantas y 
                    // puertas, descontando 1 en cada caso para hacer coincidir 
                    // los indices de los arrays
                    this.PlantasPuertas[planta - 1][puerta - 1] = nombre;

                    document.write("- " + nombre + " es ahora el propietario de la puerta " + puerta + " de la planta " + planta + ".");
                    document.write("<br />");
                };

                /***
                 * Método que recorre todas las plantas del edificio 
                 * imprimiendo los propietarios de cada puerta
                 * @returns {undefined}
                 */
                this.imprimePlantas = function ()
                {
                    document.write("<h1>Listado de propietarios del edificio " + this.imprimeCalle() + " número " + this.imprimeNumero() + "</h1>");

                    // Iteramos por todas las posiciones del vector PlantasPuertas. 
                    // Cada iteración corresponderá a una planta
                    for (var i = 0; i < this.PlantasPuertas.length; i++)
                    {
                        // Recorremos el vector que hay en cada posición del 
                        // vector PlantasPuertas. Este vector hace referencia 
                        // a las puertas que hay en cada piso y almacena el 
                        // propietario del mismo
                        for (var j = 0; j < this.PlantasPuertas[i].length; j++)
                        {
                            // Escribimos un mensaje al usuario para cada piso de cada planta
                            document.write("Propietario del piso " + (j + 1) + " de la planta " + (i + 1) + ": " + 
                                    // Verificamos el valor del array no está definido, si es así, escribimos una 
                                    // cadana en blanco y en caso contrario el valor que contiene que tiene que ser el 
                                    // del propietario
                                    (this.PlantasPuertas[i][j] === undefined ? "" : this.PlantasPuertas[i][j]));
                            document.write("<br />");
                        }
                    }
                };

            }
            
            document.write("<h1>TRABAJANDO CON OBJETOS EN JAVASCRIPT</h1>");

            // Escribimos un texto explicativo para el usuario
            document.write("Instanciamos 3 objetos edificioA, edificioB y edificioC con estos datos:");
            document.write("<br />");

            // Instanciamos los 3 objetos a partir del constructor del objeto edificio
            var edificioA = new edificio("Garcia Prieto", "58", "15706");
            var edificioB = new edificio("Camino Caneiro", "29", "32004");
            var edificioC = new edificio("San Clemente", "s/n", "15705");

            // Salto de linea para legibilidad
            document.write("<br />");

            // Escribimos varias propiedades de los distintos objetos
            // Escribimos el código postal del edificioA usando el método correspondiente
            document.write("El código postal del edificio A es: " + edificioA.imprimeCodigoPostal());
            document.write("<br />");

            // Escribimos la calle donde se encuentra el edificioC usando el método correspondiente
            document.write("La calle del edificio C es: " + edificioC.imprimeCalle());
            document.write("<br />");

            // Escribimos el la dirección del edificioB usando los métodos correspondientes
            document.write("El edificio B está situado en la calle: " + edificioB.imprimeCalle() + " número " + edificioB.imprimeNumero());
            document.write("<br />");
            document.write("<br />");

            // Agregramos un par de plantas al edificioA usando el método 
            // correspondiente y pasándole los parámetros necesarios
            document.write("Agregamos 2 plantas y 3 puertas por planta al edificio A...");
            document.write("<br />");
            edificioA.agregarPlantasYPuertas(2, 3);
            document.write("<br />");

            // Agregamos 4 propietarios al edificio, usando el método 
            // egregarPropietario, y pasandole como parámetros el nombre del 
            // propietario, el número del piso y el número de la puerta
            document.write("Agregamos 4 propietarios al edificio A...");
            document.write("<br />");
            edificioA.agregarPropietario("Jose Antonio Lopez", 1, 1);
            edificioA.agregarPropietario("Luisa Martinez", 1, 2);
            edificioA.agregarPropietario("Marta Castellón", 1, 3);
            edificioA.agregarPropietario("Antonio Pereira", 2, 2);
            document.write("<br />");

            // Imprimimos el resumen de propietarios del edificio          
            edificioA.imprimePlantas();
            document.write("<br />");

            // Agregamos una planta más al edificio, también con 3 puertas
            document.write("Agregamos 1 planta más al edificio A...");
            document.write("<br />");
            edificioA.agregarPlantasYPuertas(1, 3);

            // Agregamos un propietario nuevo al edificio, que ocupará 
            // la puerta 2 de la nueva planta 3
            document.write("Agregamos 1 propietario más al edificio A planta 3, puerta 2...");
            document.write("<br />");
            edificioA.agregarPropietario("Pedro Meijide", 3, 2);
            document.write("<br />");

            // Imprimimos el resumen de propietarios del edificio          
            edificioA.imprimePlantas();
            document.write("<br />");
        </script>
    </head>
</html>
